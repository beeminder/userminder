<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="main.css">
  <script src="bundle.js" async></script>
</head>

<body>

<h1>Backstory</h1>

<p>
We can query information about our users with URLs like
<code>https://www.beeminder.com/raplet?users[]=alice@foo.com</code>
which return JSON like so:

<pre>
[
  {
    username: "not_a_real_user",
    goals: [ "not_a_real_goal", "example", "foo", "bar" ],
    email: "support@beeminder.com",
    subscription: null,
    is_payer: false,
    pledged: 0,
    since: "2011/10",
    email_given: "alice@foo.com"
  }
]
</pre>
  
(It only returns real user info if you're logged in as an admin, but it's the same format as above either way.)
</p>
  
<p>
Our goal is to have this app monitor the clipboard (copy/paste) buffer of the operating system and whenever it contains an email address, make the above API call and display information about the Beeminder user.
</p>

<p>
That way, when we're doing Beeminder support we can keep this app running in another tab or on another screen and by doing control-c on any address, we'll immediately see in that other window all the things Beeminder can tell us about that user.
</p>

<h3>Setup</h3>
<ol>
<li>Install the
<a href="https://chrome.google.com/webstore/detail/clipboard-permission-mana/ipbhneeanpgkaleihlknhjiaamobkceh?hl=en">Clipboard Permission Manager</a>
Chrome extension</li>
<li>Click the red icon to the right of the address bar and check the box to allow "direct clipboard access" for userminder.glitch.me</li>
</ol>  

Here's an example of writing to the clipboard, which we don't actually care about:
<div data-controller="clipboard">
<input data-target="clipboard.link" type="text" value="test2216" readonly>
<button data-action="clipboard#copy">Copy to Clipboard</button>
</div>
<hr>

And here's how we can access the contents of the system clipboard:
<ol>
<li>Copy something interesting to the clipboard</li>  
<li>Click the mouse in the text area below</li>
<li>In the browser console, execute this:<br><code>document.execCommand("paste")</code></li>
<li>NEXT TASK: make the contents of the system clipboard appear in that box automatically in real time</li>
</ol>
<textarea id="vt"></textarea>

<textarea name="hide" style="display:none;"></textarea>


<h1>Scratch notes</h1>

<pre>
I guess you have to first try to execute the execCommand thing before the 
Chrome extension will prompt you for permission to read the clipboard.
So we should just make it do that on page load so it will prompt you 
right away, which will simplify these instructions a lot!
(Though maybe you'll still have to notice the red icon and click it, so
not a very obvious prompt.)
</pre>

</body>
</html>
